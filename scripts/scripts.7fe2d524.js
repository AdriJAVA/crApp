"use strict";angular.module("clashRoyaleApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","dndLists","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}]),angular.module("clashRoyaleApp").controller("MainCtrl",["$scope","clashRoyaleSrv","$log","$uibModal",function(a,b,c,d){function e(){var b=0;return a.models.lists.deck.forEach(function(a){b=a.elixirCost+b}),b/=a.models.lists.deck.length}a.models={selected:null,lists:{deck:[],cards:[]}},b.getCards().then(function(b){a.models.lists.cards=b,a.models.lists.deck=[]}),a.block=function(b,c){return"deck"===b&a.models.lists.deck.length>7?!0:!1},a.openModal=function(a){d.open({templateUrl:"views/modal.html",controller:"ModalCtrl",size:"sm",resolve:{card:function(){return a}}})},a.$watch("models.lists.deck",function(){a.elixirCostDeck=e()||0},!0)}]),angular.module("clashRoyaleApp").factory("clashRoyaleSrv",["$http","$log",function(a,b){return{getCards:function(){return a.get("https://www.clashapi.xyz/api/cards").then(function(a){return a.data},function(a){b.log(a)})}}}]),angular.module("clashRoyaleApp").controller("ModalCtrl",["$scope","$uibModalInstance","card","$log",function(a,b,c,d){a.card=c,d.log(c),a.cancel=function(){b.dismiss("cancel")}}]),angular.module("clashRoyaleApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="row" ng-repeat="(listName, list) in models.lists"> <div class="col-md-12"> <ul dnd-list="list" dnd-disable-if="block(listName)" class="{{listName}}"> <li ng-repeat="card in list" dnd-draggable="card" dnd-moved="list.splice($index, 1)" dnd-effect-allowed="move" dnd-selected="models.selected = card" ng-click="openModal(card)"> <img ng-src="http://www.clashapi.xyz/images/cards/{{card.idName}}.png"> </li> <p id="elixirDeck" ng-if="listName===\'deck\'">Average Elixir cost: {{elixirCostDeck | number:1}}</p> </ul> </div> </div> '),a.put("views/modal.html",'<div class="modal-content"> <div class="modal-header"> <h3 class="modal-title text-center">{{card.name}}</h3> <button class="btn close" type="button" ng-click="cancel()">x</button> </div> <div class="modal-body"> <div class="container-fluid"> <div class="row"> <div class="col-sm-12 col-md-12 text-center"> <img ng-src="http://www.clashapi.xyz/images/cards/{{card.idName}}.png"> </div> <div class="col-sm-12 col-md-12 text-center" style="margin-top: 10px"> <p><strong>Rarity: </strong>{{card.rarity}}</p> <p><strong>Type: </strong>{{card.type}}</p> <p><strong>Arena: </strong>{{card.arena}}</p> <p><strong>Elixir cost: </strong>{{card.elixirCost}} <img src="images/elixir.aa0de197.png" class="elixir"></p> <p><strong>Description: </strong>{{card.description}}</p> </div> </div> </div> </div> </div>')}]);